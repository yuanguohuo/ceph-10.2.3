.\" Man page generated from reStructuredText.
.
.TH "RADOSGW-ADMIN" "8" "September 21, 2016" "dev" "Ceph"
.SH NAME
radosgw-admin \- rados REST gateway user administration utility
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.nf
\fBradosgw\-admin\fP \fIcommand\fP [ \fIoptions\fP \fI\&...\fP ]
.fi
.sp
.SH DESCRIPTION
.sp
\fBradosgw\-admin\fP is a RADOS gateway user administration utility. It
allows creating and modifying users.
.SH COMMANDS
.sp
\fBradosgw\-admin\fP utility uses many commands for administration purpose
which are as follows:
.INDENT 0.0
.TP
.B \fBuser create\fP
Create a new user.
.TP
.B \fBuser modify\fP
Modify a user.
.TP
.B \fBuser info\fP
Display information of a user, and any potentially available
subusers and keys.
.TP
.B \fBuser rm\fP
Remove a user.
.TP
.B \fBuser suspend\fP
Suspend a user.
.TP
.B \fBuser enable\fP
Re\-enable user after suspension.
.TP
.B \fBuser check\fP
Check user info.
.TP
.B \fBuser stats\fP
Show user stats as accounted by quota subsystem.
.TP
.B \fBcaps add\fP
Add user capabilities.
.TP
.B \fBcaps rm\fP
Remove user capabilities.
.TP
.B \fBsubuser create\fP
Create a new subuser (primarily useful for clients using the Swift API).
.TP
.B \fBsubuser modify\fP
Modify a subuser.
.TP
.B \fBsubuser rm\fP
Remove a subuser.
.TP
.B \fBkey create\fP
Create access key.
.TP
.B \fBkey rm\fP
Remove access key.
.TP
.B \fBbucket list\fP
List all buckets.
.TP
.B \fBbucket link\fP
Link bucket to specified user.
.TP
.B \fBbucket unlink\fP
Unlink bucket from specified user.
.TP
.B \fBbucket stats\fP
Returns bucket statistics.
.TP
.B \fBbucket rm\fP
Remove a bucket.
.TP
.B \fBbucket check\fP
Check bucket index.
.TP
.B \fBobject rm\fP
Remove an object.
.TP
.B \fBobject unlink\fP
Unlink object from bucket index.
.TP
.B \fBquota set\fP
Set quota params.
.TP
.B \fBquota enable\fP
Enable quota.
.TP
.B \fBquota disable\fP
Disable quota.
.TP
.B \fBregion get\fP
Show region info.
.TP
.B \fBregion list\fP
List all regions set on this cluster.
.TP
.B \fBregion set\fP
Set region info (requires infile).
.TP
.B \fBregion default\fP
Set default region.
.TP
.B \fBregion\-map get\fP
Show region\-map.
.TP
.B \fBregion\-map set\fP
Set region\-map (requires infile).
.TP
.B \fBzone get\fP
Show zone cluster params.
.TP
.B \fBzone set\fP
Set zone cluster params (requires infile).
.TP
.B \fBzone list\fP
List all zones set on this cluster.
.TP
.B \fBpool add\fP
Add an existing pool for data placement.
.TP
.B \fBpool rm\fP
Remove an existing pool from data placement set.
.TP
.B \fBpools list\fP
List placement active set.
.TP
.B \fBpolicy\fP
Display bucket/object policy.
.TP
.B \fBlog list\fP
List log objects.
.TP
.B \fBlog show\fP
Dump a log from specific object or (bucket + date + bucket\-id).
(NOTE: required to specify formatting of date to "YYYY\-MM\-DD\-hh")
.TP
.B \fBlog rm\fP
Remove log object.
.TP
.B \fBusage show\fP
Show the usage information (with optional user and date range).
.TP
.B \fBusage trim\fP
Trim usage information (with optional user and date range).
.TP
.B \fBgc list\fP
Dump expired garbage collection objects (specify \-\-include\-all to list all
entries, including unexpired).
.TP
.B \fBgc process\fP
Manually process garbage.
.TP
.B \fBmetadata get\fP
Get metadata info.
.TP
.B \fBmetadata put\fP
Put metadata info.
.TP
.B \fBmetadata rm\fP
Remove metadata info.
.TP
.B \fBmetadata list\fP
List metadata info.
.TP
.B \fBmdlog list\fP
List metadata log.
.TP
.B \fBmdlog trim\fP
Trim metadata log.
.TP
.B \fBbilog list\fP
List bucket index log.
.TP
.B \fBbilog trim\fP
Trim bucket index log (use start\-marker, end\-marker).
.TP
.B \fBdatalog list\fP
List data log.
.TP
.B \fBdatalog trim\fP
Trim data log.
.TP
.B \fBopstate list\fP
List stateful operations entries (use client_id, op_id, object).
.TP
.B \fBopstate set\fP
Set state on an entry (use client_id, op_id, object, state).
.TP
.B \fBopstate renew\fP
Renew state on an entry (use client_id, op_id, object).
.TP
.B \fBopstate rm\fP
Remove entry (use client_id, op_id, object).
.TP
.B \fBreplicalog get\fP
Get replica metadata log entry.
.TP
.B \fBreplicalog delete\fP
Delete replica metadata log entry.
.TP
.B \fBorphans find\fP
Init and run search for leaked rados objects
.TP
.B \fBorphans finish\fP
Clean up search for leaked rados objects
.UNINDENT
.SH OPTIONS
.INDENT 0.0
.TP
.B \-c ceph.conf, \-\-conf=ceph.conf
Use \fBceph.conf\fP configuration file instead of the default
\fB/etc/ceph/ceph.conf\fP to determine monitor addresses during
startup.
.UNINDENT
.INDENT 0.0
.TP
.B \-m monaddress[:port]
Connect to specified monitor (instead of looking through ceph.conf).
.UNINDENT
.INDENT 0.0
.TP
.B \-\-uid=uid
The radosgw user ID.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-subuser=<name>
Name of the subuser.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-email=email
The e\-mail address of the user.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-display\-name=name
Configure the display name of the user.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-access\-key=<key>
S3 access key.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-gen\-access\-key
Generate random access key (for S3).
.UNINDENT
.INDENT 0.0
.TP
.B \-\-secret=secret
The secret associated with a given key.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-gen\-secret
Generate random secret key.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-key\-type=<type>
key type, options are: swift, S3.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-temp\-url\-key[\-2]=<key>
Temporary url key.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-system
Set the system flag on the user.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-bucket=bucket
Specify the bucket name.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-object=object
Specify the object name.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-date=yyyy\-mm\-dd
The date needed for some commands.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-start\-date=yyyy\-mm\-dd
The start date needed for some commands.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-end\-date=yyyy\-mm\-dd
The end date needed for some commands.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-shard\-id=<shard\-id>
Optional for mdlog list. Required for \fBmdlog trim\fP,
\fBreplica mdlog get/delete\fP, \fBreplica datalog get/delete\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-auth\-uid=auid
The librados auid.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-purge\-data
Remove user data before user removal.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-purge\-keys
When specified, subuser removal will also purge all the subuser keys.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-purge\-objects
Remove all objects before bucket removal.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-metadata\-key=<key>
Key to retrieve metadata from with \fBmetadata get\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-rgw\-region=<region>
Region in which radosgw is running.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-rgw\-zone=<zone>
Zone in which radosgw is running.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-fix
Besides checking bucket index, will also fix it.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-check\-objects
bucket check: Rebuilds bucket index according to actual objects state.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-format=<format>
Specify output format for certain operations: xml, json.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sync\-stats
Option to \(aquser stats\(aq, update user stats with current stats reported by
user\(aqs buckets indexes.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-show\-log\-entries=<flag>
Enable/disable dump of log entries on log show.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-show\-log\-sum=<flag>
Enable/disable dump of log summation on log show.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-skip\-zero\-entries
Log show only dumps entries that don\(aqt have zero value in one of the numeric
field.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-infile
Specify a file to read in when setting data.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-state=<state string>
Specify a state for the opstate set command.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-replica\-log\-type
Replica log type (metadata, data, bucket), required for replica log
operations.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-categories=<list>
Comma separated list of categories, used in usage show.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-caps=<caps>
List of caps (e.g., "usage=read, write; user=read".
.UNINDENT
.INDENT 0.0
.TP
.B \-\-yes\-i\-really\-mean\-it
Required for certain operations.
.UNINDENT
.SH QUOTA OPTIONS
.INDENT 0.0
.TP
.B \-\-max\-objects
Specify max objects (negative value to disable).
.UNINDENT
.INDENT 0.0
.TP
.B \-\-max\-size
Specify max size (in bytes, negative value to disable).
.UNINDENT
.INDENT 0.0
.TP
.B \-\-quota\-scope
Scope of quota (bucket, user).
.UNINDENT
.SH ORPHANS SEARCH OPTIONS
.INDENT 0.0
.TP
.B \-\-pool
Data pool to scan for leaked rados objects
.UNINDENT
.INDENT 0.0
.TP
.B \-\-num\-shards
Number of shards to use for keeping the temporary scan info
.UNINDENT
.SH EXAMPLES
.sp
Generate a new user:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin user create \-\-display\-name="johnny rotten" \-\-uid=johnny
{ "user_id": "johnny",
  "rados_uid": 0,
  "display_name": "johnny rotten",
  "email": "",
  "suspended": 0,
  "subusers": [],
  "keys": [
        { "user": "johnny",
          "access_key": "TCICW53D9BQ2VGC46I44",
          "secret_key": "tfm9aHMI8X76L3UdgE+ZQaJag1vJQmE6HDb5Lbrz"}],
  "swift_keys": []}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Remove a user:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin user rm \-\-uid=johnny
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Remove a user and all associated buckets with their contents:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin user rm \-\-uid=johnny \-\-purge\-data
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Remove a bucket:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin bucket unlink \-\-bucket=foo
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Show the logs of a bucket from April 1st, 2012:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin log show \-\-bucket=foo \-\-date=2012\-04\-01\-01 \-\-bucket\-id=default.14193.1
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Show usage information for user from March 1st to (but not including) April 1st, 2012:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin usage show \-\-uid=johnny \e
                \-\-start\-date=2012\-03\-01 \-\-end\-date=2012\-04\-01
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Show only summary of usage information for all users:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin usage show \-\-show\-log\-entries=false
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Trim usage information for user until March 1st, 2012:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin usage trim \-\-uid=johnny \-\-end\-date=2012\-04\-01
.ft P
.fi
.UNINDENT
.UNINDENT
.SH AVAILABILITY
.sp
\fBradosgw\-admin\fP is part of Ceph, a massively scalable, open\-source,
distributed storage system.  Please refer to the Ceph documentation at
\fI\%http://ceph.com/docs\fP for more information.
.SH SEE ALSO
.sp
\fBceph\fP(8)
\fBradosgw\fP(8)
.SH COPYRIGHT
2010-2014, Inktank Storage, Inc. and contributors. Licensed under Creative Commons BY-SA
.\" Generated by docutils manpage writer.
.
